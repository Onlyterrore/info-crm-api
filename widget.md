## Особенности работы виджета 

### Подключение виджета
В разделе ``<head>...</head>`` страницы нужно подключить следующие скрипты (если подключена доругая версия jquery, первая строка необязательна):
```html
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="//info-crm.test/js/bwcode.js?v=3"></script>
```  

### Вызов виджета

#### Запуск виджета
Для вызова виджета можно использовать различные html-элементы. Важно чтобы элемент содержал 2 обязательных параметра из указанного списка:
* **class="bw_link"** - обязательный параметр, класс-идентификатор, к которому привязан обработчик, запускающий виджет.
* **data-id** - обязательный параметр, содержащий ID организации
* **data-lng** - необязательный параметр, код локали для виджета. ОБратите внимание, что локаль прописывается в сессию. потому, если на одной странице разместить ссылки для вызова вилджета с разными языками, виджет запомнит только первую локаль. Сменить её можно либо в самом виджете, либо она сменится после перезагрузки старницы и выбора ссылки с другим значением языка. 

#### Примеры элементов, вызывающих виджет:
```html
<a href="javascript:void(0);" class="bw_link" data-id="2" data-lang="ru">Записаться онлайн</a>
<div class="bw_link" data-id="3">Записаться онлайн</div>
<button class="bw_link" data-id="1" data-lang="es" type="button">Записаться онлайн!</button>
```

### Отклик  виджета
При нажатии на кнопку "Записаться" (отправка формы виджета) на родительскую страницу отправляется событие, "услышав" которое, можно выполнить какие-то свои действия(отправка метрик и прочее). Событие имеет метку "_ig_wigdet_complete". Код обработчика события размещается на родительской по отношении к виджету странице и выглядит следующим образом:  
```javascript
window.addEventListener('message', function (event) {
    if (event.data.event == "_ig_wigdet_complete") {
        // Ваш код реакции на отклик виджета
        console.log('got _ig_wigdet_complete');            
    }
}, false);
```